<ion-view view-title="Dashboard" hide-back-button="true">
    <ion-nav-buttons side="right">
        <button menu-toggle="left" class="button button-icon icon" ng-click="opera()">{{operation}}</button>
    </ion-nav-buttons>
    <!-- <ion-nav-buttons side="left">
        <button menu-toggle="left" class="button button-icon icon" ng-click="login()">{{local.login}}</button>
    </ion-nav-buttons> -->
    <ion-content id="historyTab" scroll="false">
        <div id="fixedArea">
            <div class="query-cond">
                <div class="bar bar-header item-input-inset search">
                    <div class="item-input-wrapper">
                        <i class="icon ion-ios-search placeholder-icon"></i>
                        <input type="search" placeholder="{{local.search_ph}}" ng-model="prox.searchContent">
                        <i class="icon ion-close-circled placeholder-icon" ng-click="eventFun.cancelEnter()"></i>
                    </div>
                </div>
                <div class="list">
                    <div class="item" id="data-range">
                        {{local.date_range}}
                        <button class="button button-dark button-clear" ng-click="eventFun.changeDateBtnEVt()">
                            {{date_range}}
                            <i class="icon ion-arrow-down-b"></i>
                        </button>
                    </div>
                </div>
                <div ng-class="{'front_mask_layer':!operator}"></div>
            </div>
            <div class="button-bar padding">
                <a class="button button-light" ng-class="{ 'activeButton': type === 0 }" ng-click="filterType(0)" ng-disabled="!operator">{{local.types.all}}</a>
                <a class="button button-light" ng-class="{ 'activeButton': type === 1 }" ng-click="filterType(1)" ng-disabled="!operator">{{local.types.normal}}</a>
                <a class="button button-light" ng-class="{ 'activeButton': type === 2 }" ng-click="filterType(2)" ng-disabled="!operator">{{local.types.abnormal}}</a>
            </div>
        </div>
        <ion-scroll ng-style="scrollHeight">
            <ion-refresher on-refresh="doRefresh()" pulling-text="Pull to refresh..." refreshing-text="Refreshing!" refreshing-icon="ion-loading-b">
            </ion-refresher>
            <div class="list padding">
                <ion-list show-checkbox="shouldShowCheckbox" checkbox-model="checkboxs">
                    <ion-item ng-repeat="item in list" class="reportItem" href="#/tab/history/{{item.id}}">
                        <ion-checkbox-button item-id="{{item.id}}"></ion-checkbox-button>
                        <span class="name">{{item.name }}</span>
                        <span class="status">
                        <i class="icon ion-checkmark" ng-if="item.status===1"></i>
                        <i class="icon ion-android-alert" ng-if="item.status!==1"></i>
                        <span ng-switch="item.status"> 
                        <span ng-switch-when="1">{{local.types.normal}}</span>
                        <span ng-switch-when="2">{{local.faults.pon}}</span>
                        <span ng-switch-when="3">{{local.faults.data}}</span>
                        <span ng-switch-when="4">{{local.faults.voice}}</span>
                        </span>
                        </span>
                        <span class="date">{{item.date}}</span>
                        <ion-option-button class="button-assertive" ng-click="deleteReport(item)">{{local.del}}</ion-option-button>
                    </ion-item>
                </ion-list>
                <p class="loadding" ng-show="prox.loadding">
                    <ion-spinner icon="dots" class="spinner-dark"></ion-spinner>
                </p>
            </div>
        </ion-scroll>
    </ion-content>
    <div style="display:none;" id="confirm">
        <div>
            <button class="button button-assertive button-outline">
                {{local.del_sure}}
            </button>
            <button class="button button-positive  button-outline " ng-click="hideDelete()">
                {{local.cancel}}
            </button>
        </div>
    </div>
    <!-- <div id="history-operrator" ng-class="{'show_ani':showModel}">
        <div class="icon">
            <div class="circle" ng-click="batchDelele($event)">
                <i class="ion-ios-trash-outline"></i>
                <div class="explain">{{local.del_batch}}</div>
            </div>
        </div>
    </div> -->
</ion-view>
<!-- 批量删除上弹框 -->
<script id="batchDelele.html" type="text/ng-template">
    <div ng-click="batchDelele($event)" class="show center footer-button">
        <div>{{local.del_batch}}</div>
    </div>
</script>
<!-- 选择日期上弹框 -->
<script id="changeDate.html" type="text/ng-template">
    <div class="list expander">
        <div class="item item-button-right">
            &nbsp;
            <button class="button button-stable button-clear" ng-click="eventFun.close()">
                <i class="icon ion-close"></i>
            </button>
        </div>
    </div>
    <ion-list>
        <ion-radio ng-model="range" ng-value="0">{{local.date_select.all}}</ion-radio>
        <ion-radio ng-model="range" ng-value="1">{{local.date_select.today}}</ion-radio>
        <ion-radio ng-model="range" ng-value="2">{{local.date_select.twoDays}}</ion-radio>
        <ion-radio ng-model="range" ng-value="3">{{local.date_select.week}}</ion-radio>
        <ion-radio ng-model="range" ng-value="4">{{local.date_select.month}}</ion-radio>
        <ion-radio ng-model="range" ng-value="5" class="no-border-bottom">{{local.date_select.customized}}</ion-radio>
    </ion-list>
    <div class="list expander" id="dateRangeInpute">
        <div class="item item-input no-border show center" ng-class="{true: 'show', false: 'occupying-hidden'}[range===5]">
            <div class="input-label">
                {{local.start_date}}
            </div>
            <div class="date-content show center" ng-click="chooseDate(true)">
                <span>{{startDate}}</span>
            </div>
        </div>
        <div class="item item-input no-border show center" ng-class="{true: 'show', false: 'occupying-hidden'}[range===5]">
            <div class="input-label">
                {{local.end_date}}
            </div>
            <div class="date-content show center" ng-click="chooseDate(false)">
                <span>{{endDate}}</span>
            </div>
        </div>
        <div class="item item-button expander-footer show center">
            <button class="button button-positive" style="width:50%;" ng-click="changeDate(range)">
                <span>{{local.ok}}</span>
            </button>
        </div>
    </div>
</script>
